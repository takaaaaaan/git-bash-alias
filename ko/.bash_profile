# generated by Git for Windows
test -f ~/.profile && . ~/.profile
test -f ~/.bashrc && . ~/.bashrc
if [ -f ~/.bashrc ]; then
    source ~/.bashrc
fi

#python envé–¢æ•°

# ê°€ìƒí™˜ê²½ ëª©ë¡
function listenvs() {
    echo "ğŸ“ ë¡œì»¬ ê°€ìƒí™˜ê²½:"
    if [ -d . ]; then
        for d in */; do
            if [ -f "$d/Scripts/activate" ] || [ -f "$d/bin/activate" ]; then
                echo "  - ${d%/}"
            fi
        done
    fi

    echo "ğŸŒ ê¸€ë¡œë²Œ ê°€ìƒí™˜ê²½ï¼ˆ~/venvsï¼‰:"
    if [ -d "$HOME/venvs" ]; then
        for d in "$HOME/venvs"/*; do
            if [ -f "$d/Scripts/activate" ] || [ -f "$d/bin/activate" ]; then
                echo "  - $(basename "$d")"
            fi
        done
    else
        echo "  (~/venvs ë””ë ‰í† ë¦¬ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤)"
    fi
}

# ê°€ìƒí™˜ê²½ í™œì„±í™”
function actenv() {
    local name="$1"
    local local_path="./$name/Scripts/activate"
    local global_path="$HOME/venvs/$name/Scripts/activate"

    if [ -f "$local_path" ]; then
        source "$local_path"
        echo "âœ… ë¡œì»¬ ê°€ìƒí™˜ê²½ í™œì„±í™”: $name"
    elif [ -f "$global_path" ]; then
        source "$global_path"
        echo "âœ… ê¸€ë¡œë²Œ ê°€ìƒí™˜ê²½ í™œì„±í™”: $name"
    else
        echo "âŒ í•´ë‹¹ ê°€ìƒí™˜ê²½ì´ ì—†ìŠµë‹ˆë‹¤: $name (./ ë° ~/venvsì—ì„œ ê²€ìƒ‰)"
    fi
}

# ê°€ìƒí™˜ê²½ ë¹„í™œì„±í™”
function deactenv() {
    if declare -f deactivate > /dev/null; then
        deactivate
        echo "ğŸ”» ë¹„í™œì„±í™”ë¨"
    else
        echo "âš ï¸ í™œì„±í™”ëœ í™˜ê²½ì´ ì—†ìŠµë‹ˆë‹¤"
    fi
}

# ê°€ìƒí™˜ê²½ ìƒì„±
function createenv() {
    local mode="$1"
    local name="$2"

    if [ -z "$mode" ] || [ -z "$name" ]; then
        echo "â—ì‚¬ìš©ë²•: createenv [loc|glo] env_name"
        return 1
    fi

    local target_path=""
    if [ "$mode" == "loc" ]; then
        target_path="./$name"
    elif [ "$mode" == "glo" ]; then
        target_path="$HOME/venvs/$name"
    else
        echo "â—ëª¨ë“œëŠ” 'loc' ë˜ëŠ” 'glo'ë¥¼ ì§€ì •í•´ì£¼ì„¸ìš”"
        return 1
    fi

    python -m venv "$target_path"
    echo "ğŸ‰ Created $name at $target_path"
}

# ê°€ìƒí™˜ê²½ ì‚­ì œ
function deleteenv() {
    local mode="$1"
    local name="$2"

    if [ -z "$mode" ] || [ -z "$name" ]; then
        echo "â—ì‚¬ìš©ë²•: deleteenv [loc|glo] env_name"
        return 1
    fi

    local target_path=""
    if [ "$mode" == "loc" ]; then
        target_path="./$name"
    elif [ "$mode" == "glo" ]; then
        target_path="$HOME/venvs/$name"
    else
        echo "â—ëª¨ë“œëŠ” 'loc' ë˜ëŠ” 'glo'ë¥¼ ì§€ì •í•´ì£¼ì„¸ìš”"
        return 1
    fi

    if [ ! -d "$target_path" ]; then
        echo "âŒ ê°€ìƒí™˜ê²½ì„ ëª»ì°¾ìŠµë‹ˆë‹¤.: $target_path"
        return 1
    fi

    # í™•ì¸ í”„ë¡¬í”„íŠ¸
    read -p "âš ï¸ ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? '$target_path' (y/n): " confirm
    if [[ "$confirm" == "y" || "$confirm" == "Y" ]]; then
        rm -rf "$target_path"
        echo "ğŸ—‘ï¸  ì‚­ì œí–ˆìŠµë‹ˆë‹¤: $target_path"
    else
        echo "ğŸš« ì‚­ì œë¥¼ ì·¨ì†Œí–ˆìŠµë‹ˆë‹¤"
    fi
}
