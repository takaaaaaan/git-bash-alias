# generated by Git for Windows
test -f ~/.profile && . ~/.profile
test -f ~/.bashrc && . ~/.bashrc
if [ -f ~/.bashrc ]; then
    source ~/.bashrc
fi

#python envé–¢æ•°

# ä»®æƒ³ç’°å¢ƒä¸€è¦§
function listenvs() {
    echo "ğŸ“ ãƒ­ãƒ¼ã‚«ãƒ«ä»®æƒ³ç’°å¢ƒ:"
    if [ -d . ]; then
        for d in */; do
            if [ -f "$d/Scripts/activate" ] || [ -f "$d/bin/activate" ]; then
                echo "  - ${d%/}"
            fi
        done
    fi

    echo "ğŸŒ ã‚°ãƒ­ãƒ¼ãƒãƒ«ä»®æƒ³ç’°å¢ƒï¼ˆ~/venvsï¼‰:"
    if [ -d "$HOME/venvs" ]; then
        for d in "$HOME/venvs"/*; do
            if [ -f "$d/Scripts/activate" ] || [ -f "$d/bin/activate" ]; then
                echo "  - $(basename "$d")"
            fi
        done
    else
        echo "  (~/venvs ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã—ã¾ã›ã‚“)"
    fi
}

# ä»®æƒ³ç’°å¢ƒæœ‰åŠ¹åŒ–
function actenv() {
    local name="$1"
    local local_path="./$name/Scripts/activate"
    local global_path="$HOME/venvs/$name/Scripts/activate"

    if [ -f "$local_path" ]; then
        source "$local_path"
        echo "âœ… Activated (local): $name"
    elif [ -f "$global_path" ]; then
        source "$global_path"
        echo "âœ… Activated (global): $name"
    else
        echo "âŒ No such virtual environment: $name (searched in ./ and ~/venvs)"
    fi
}

# ä»®æƒ³ç’°å¢ƒç„¡åŠ¹åŒ–
function deactenv() {
    if declare -f deactivate > /dev/null; then
        deactivate
        echo "ğŸ”» Deactivated"
    else
        echo "âš ï¸  No environment is active"
    fi
}

# ä»®æƒ³ç’°å¢ƒä½œæˆ
function createenv() {
    local mode="$1"
    local name="$2"

    if [ -z "$mode" ] || [ -z "$name" ]; then
        echo "â—ä½¿ã„æ–¹: createenv [loc|glo] env_name"
        return 1
    fi

    local target_path=""
    if [ "$mode" == "loc" ]; then
        target_path="./$name"
    elif [ "$mode" == "glo" ]; then
        target_path="$HOME/venvs/$name"
    else
        echo "â—ãƒ¢ãƒ¼ãƒ‰ã¯ 'loc' ã¾ãŸã¯ 'glo' ã‚’æŒ‡å®šã—ã¦ãã ã•ã„"
        return 1
    fi

    python -m venv "$target_path"
    echo "ğŸ‰ Created $name at $target_path"
}

# ä»®æƒ³ç’°å¢ƒå‰Šé™¤
function deleteenv() {
    local mode="$1"
    local name="$2"

    if [ -z "$mode" ] || [ -z "$name" ]; then
        echo "â—ä½¿ã„æ–¹: deleteenv [loc|glo] env_name"
        return 1
    fi

    local target_path=""
    if [ "$mode" == "loc" ]; then
        target_path="./$name"
    elif [ "$mode" == "glo" ]; then
        target_path="$HOME/venvs/$name"
    else
        echo "â—ãƒ¢ãƒ¼ãƒ‰ã¯ 'loc' ã¾ãŸã¯ 'glo' ã‚’æŒ‡å®šã—ã¦ãã ã•ã„"
        return 1
    fi

    if [ ! -d "$target_path" ]; then
        echo "âŒ ä»®æƒ³ç’°å¢ƒãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: $target_path"
        return 1
    fi

    # ç¢ºèªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
    read -p "âš ï¸ æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ '$target_path' (y/n): " confirm
    if [[ "$confirm" == "y" || "$confirm" == "Y" ]]; then
        rm -rf "$target_path"
        echo "ğŸ—‘ï¸  å‰Šé™¤ã—ã¾ã—ãŸ: $target_path"
    else
        echo "ğŸš« å‰Šé™¤ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¾ã—ãŸ"
    fi
}
